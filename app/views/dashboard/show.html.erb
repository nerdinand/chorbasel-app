<% content_for :title, t('.title') %>

<% unless current_user.profile_complete? %>
  <div>
    <%= t('.profile_completeness.message') %>
    <%= link_to t('.profile_completeness.link'), edit_user_path(current_user) %>
  </div>
<% end %>

<% if @attendances.any? %>
  <h2><%= t('.attendances.title') %></h2>

  <% @attendances.each do |attendance| %>
    <div>
      <p><%= attendance.calendar_event.summary %></p>

      <% if attendance.new_record? %>
        <%= form_for [attendance.calendar_event, attendance], method: :post do |f| %>
          <%= f.hidden_field :user_id %>
          <%= f.hidden_field :status %>
          <%= f.submit t('.calendar_events.attendance.submit'), class: 'btn btn-primary' %>
        <% end %>
      <% end %>
    </div>
  <% end %>
<% end %>

<h2><%= t('.calendar.title') %></h2>
<p><%= t('.calendar.description') %></p>

<% @calendar_events.each do |calendar_event| %>
  <div class='my-5 p-2 border-solid border-primary border-2 rounded bg-gray'>
    <p class='text-xs'><%= time_ago_in_words(calendar_event.starts_at) %></p>
    <p class='font-bold'><%=   calendar_event.summary %></p>
    <p class='italic'><%= calendar_event.location %></p>
    <p class='mt-2'><%= simple_format calendar_event.description %></p>
  </div>
<% end %>

<% if policy(:calendar_syncs).create? %>
  <%= button_to t('.calendar_events.sync'), calendar_events_syncs_path, method: :post, class: 'btn btn-primary' %>
<% end %>
